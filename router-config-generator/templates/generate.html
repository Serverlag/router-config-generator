{% extends "layout.html" %}
{% block title %}
Router Config Generator
{% endblock %}
{% block content %}
<div class="title">
<h1>Router Config Generator</h1>
{% if rtr_vendor == 'Cisco' %}
<div class="cisco-router-config">
service tcp-keepalives-out <br/>
service timestamps debug datetime localtime show-timezone year <br/>
service timestamps log datetime localtime show-timezone year <br/>
service password-encryption <br/>
service sequence-numbers <br/>
! <br/>
hostname {{ rtr_hostname }} <br/>
! <br/>
logging buffered 51200 informational <br/>
! <br/>
aaa new-model <br/>
! <br/>
aaa authentication login default local <br/>
aaa authorization console <br/>
aaa authorization exec default local <br/>
! <br/>
clock timezone {{ tz_name }} {{ tz_offset }} <br/>
! <br/>
ipv6 unicast-routing <br/>
ipv6 cef <br/>
! <br/>
ipv6 inspect name FWv6 tcp <br/>
ipv6 inspect name FWv6 udp <br/>
ipv6 inspect name FWv6 icmp <br/>
! <br/>
ip domain name {{ dns_suffix }} <br/>
ip name-server {{ dns_resolver_primary_ipv4 }} <br/>
ip name-server {{ dns_resolver_secondary_ipv4 }} <br/>
ip name-server {{ dns_resolver_primary_ipv6 }} <br/>
ip name-server {{ dns_resolver_secondary_ipv6 }} <br/>
! <br/>
{% if lan_dhcpv4_server == True %}
ip dhcp pool LAN <br/>
network {{ ipv4_network_address }} {{ ipv4_subnet_mask }} <br/>
default-router {{ lan_ipv4_address }} <br/>
dns-server {{ lan_ipv4_address }} <br/>
lease 7 <br/>
{% endif %}
! <br/>
{% if lan_dhcpv4_exclusions == True %}
ip dhcp excluded-address {{ lan_dhcpv4_excluded_first }} {{ lan_dhcpv4_excluded_last }} <br/>
{% endif %}
! <br/>
ip inspect name FWv4 tcp router-traffic <br/>
ip inspect name FWv4 udp router-traffic <br/>
ip inspect name FWv4 icmp <br/>
! <br/>
archive <br/>
log config <br/>
logging enable <br/>
notify syslog contenttype plaintext <br/>
hidekeys <br/>
! <br/>
username {{ rtr_admin_username }} privelege 15 secret 0 {{ rtr_admin_password }} <br/>
! <br/>
no cdp run <br/>
! <br/>
no ip http server <br/>
no ip http secure-server <br/>
! <br/>
crypto key generate rsa modulus 2048 <br/>
! <br/>
ip access-list extended ACL-INFRASTRUCTURE-IN <br/>
10 deny ip 0.0.0.0 0.255.255.255 any <br/>
20 deny ip 10.0.0.0 0.255.255.255 any <br/>
30 deny ip 127.0.0.0 0.255.255.255 any <br/>
40 deny ip 169.254.0.0 0.0.255.255 any <br/>
50 deny ip 172.16.0.0 0.15.255.255 any <br/>
60 deny ip 192.168.0.0 0.0.255.255 any <br/>
70 deny ip 198.18.0.0 0.0.255.255 any <br/>
80 deny ip 224.0.0.0 31.255.255.255 any <br/>
90 deny tcp any any fragments <br/>
100 deny udp any any fragments <br/>
110 deny icmp any any fragments <br/>
120 permit icmp any any echo <br/>
130 permit icmp any any echo-reply <br/>
140 permit icmp any any time-exceeded <br/>
150 permit icmp any any unreachable <br/>
160 permit icmp any any packet-too-big <br/>
300 deny ip any any log <br/>
! <br/>
line con 0 <br/>
exec-timeout 30 0  <br/>
no modem enable  <br/>
line aux 0  <br/>
exec-timeout 0 1  <br/>
no exec <br/>
transport output none <br/>
line vty 0 4 <br/>
access-class MGMT-IN in <br/>
exec-timeout 30 0 <br/>
logging synchronous <br/>
transport input ssh <br/>
! <br/>
ntp server 202.89.184.139 <br/>
ntp server 203.206.171.84 <br/>
ntp server 220.233.200.157 <br/>
! <br/>
ip access-list extended MGMT-IN <br/>
permit tcp 192.168.0.0 0.0.255.255 any eq 22 <br/>
permit tcp 172.16.0.0 0.15.255.255 any eq 22 <br/>
permit tcp 10.0.0.0 0.255.255.255 any eq 22 <br/>
! <br/>
access-list 1 permit {{ ipv4_network_address }} {{ ipv4_hostmask }} <br/>
! <br/>

{% if wan_auth_type == 'IPoE' and (wan_technology_type == 'FTTP' or wan_technology_type == 'HFC') %}

{% if rtr_series == '880' or rtr_series == '890' %}
interface vlan 50 <br/>
ip address dhcp <br/>
ip access-group ACL-INFRASTRUCTURE-IN in <br/>
no ip redirects <br/>
no ip proxy-arp <br/>
ip nat outside <br/>
ip inspect FWv4 out <br/>
! <br/>
interface FastEthernet0 <br/>
switchport mode access <br/>
switchport access vlan 50 <br/>  
! <br/>
interface vlan 1 <br/>
ip address {{ lan_ipv4_address }} {{ ipv4_subnet_mask }} <br/>
no ip proxy-arp <br/>
ip nat inside <br/>
ip virtual-reassembly in <br/>
ip tcp adjust-mss 1300 <br/>
exit <br/>
! <br/>
ip nat inside source list 1 interface vlan 50 overload <br/>
! <br/>
ip access-list extended ACL-INFRASTRUCTURE-IN <br/>
170 permit udp any any eq bootpc <br/>

{% endif %}

{% if rtr_series == '1100' %}
{% endif %}

{% if rtr_series == '1900' or rtr_series == '2900' %}
interface GigabitEthernet0/0 <br/>
ip address dhcp <br/>
ip access-group ACL-INFRASTRUCTURE-IN in <br/>
no ip redirects <br/>
no ip proxy-arp <br/>
ip nat outside <br/>
ip inspect FWv4 out <br/>
! <br/>
interface GigabitEthernet0/1 <br/>
ip address {{ lan_ipv4_address }} {{ ipv4_subnet_mask }} <br/>
no ip proxy-arp <br/>
ip nat inside <br/>
ip virtual-reassembly in <br/>
ip tcp adjust-mss 1300 <br/>
exit <br/>
! <br/>
ip nat inside source list 1 interface GigabitEthernet0/0 overload <br/>
! <br/>
ip access-list extended ACL-INFRASTRUCTURE-IN <br/>
170 permit udp any any eq bootpc <br/>
{% endif %}

{% if rtr_series == '4000' %}
{% endif %}
{% endif %}

{% if wan_auth_type == 'IPoE' and (wan_technology_type == 'FTTN' or wan_technology_type == 'FTTC') %}

{% if rtr_series == '880' or rtr_series == '890' %}
interface ethernet0 <br/>
ip address dhcp <br/>
ip access-group ACL-INFRASTRUCTURE-IN in <br/>
no ip redirects <br/>
no ip proxy-arp <br/>
ip nat outside <br/>
ip inspect FWv4 out <br/>
ip virtual-reassembly in <br/>
no cdp enable <br/>
! <br/>
interface vlan 1 <br/>
ip address {{ lan_ipv4_address }} {{ ipv4_subnet_mask }} <br/>
no ip proxy-arp <br/>
ip nat inside <br/>
ip virtual-reassembly in <br/>
ip tcp adjust-mss 1300 <br/>
exit <br/>
! <br/>
ip nat inside source list 1 interface Ethernet0 overload <br/>
! <br/>
ip access-list extended ACL-INFRASTRUCTURE-IN <br/>
170 permit udp any any eq bootpc <br/>
{% endif %}

{% if rtr_series == '1100' %}
{% endif %}

{% if rtr_series == '1900' or rtr_series == '2900' %}
interface Ethernet0/0/0 <br/>
ip address dhcp <br/>
ip access-group ACL-INFRASTRUCTURE-IN in <br/>
no ip redirects <br/>
no ip proxy-arp <br/>
ip nat outside <br/>
ip inspect FWv4 out <br/>
ip virtual-reassembly in <br/>
no cdp enable <br/>
! <br/>
interface GigabitEthernet0/1 <br/>
ip address {{ lan_ipv4_address }} {{ ipv4_subnet_mask }} <br/>
no ip proxy-arp <br/>
ip nat inside <br/>
ip virtual-reassembly in <br/>
ip tcp adjust-mss 1300 <br/>
exit <br/>
! <br/>
ip nat inside source list 1 interface Ethernet0/0/0 overload <br/>
! <br/>
ip access-list extended ACL-INFRASTRUCTURE-IN <br/>
175 permit udp any any eq bootpc <br/>
{% endif %}

{% if rtr_series == '4000' %}
{% endif %}
{% endif %}


{% if wan_auth_type == 'PPPoE' and (wan_technology_type == 'FTTP' or wan_technology_type == 'HFC') %}

{% if rtr_series == '880' or rtr_series == '890' %}
interface vlan 50 <br/>
pppoe enable group global <br/>
pppoe-client dial-pool-number 1 <br/>
! <br/>
interface dialer0 <br/>
ip address negotiated <br/>
ip access-group ACL-INFRASTRUCTURE-IN in <br/>
no ip redirects <br/>
no ip proxy-arp <br/>
ip nat outside <br/>
ip inspect FWv4 out <br/>
ip virtual-reassembly in <br/>
encapsulation ppp <br/>
dialer pool 1 <br/>
ppp chap callin <br/>
ppp chap hostname router.isphostname <br/>
ppp chap password router.isppassword <br/>
no cdp enable <br/>
! <br/>
interface FastEthernet0 <br/>
switchport mode access <br/>
switchport access vlan 50  <br/>
! <br/>
interface vlan 1 <br/>
ip address {{ lan_ipv4_address }} {{ ipv4_subnet_mask }} <br/>
no ip proxy-arp <br/>
ip nat inside <br/>
ip virtual-reassembly in <br/>
ip tcp adjust-mss 1300 <br/>
exit <br/>
! <br/>
ip route 0.0.0.0 0.0.0.0 dialer 0 <br/>
! <br/>
ip nat inside source list 1 interface dialer0 overload <br/>

{% endif %}

{% if rtr_series == '1100' %}
{% endif %}

{% if rtr_series == '1900' or rtr_series == '2900' %}
interface GigabitEthernet0/0 <br/>
pppoe enable group global <br/>
pppoe-client dial-pool-number 1 <br/>
! <br/>
interface dialer0 <br/>
ip address negotiated <br/>
ip access-group ACL-INFRASTRUCTURE-IN in <br/>
no ip redirects <br/>
no ip proxy-arp <br/>
ip nat outside <br/>
ip inspect FWv4 out <br/>
ip virtual-reassembly in <br/>
encapsulation ppp <br/>
dialer pool 1 <br/>
ppp chap callin <br/>
ppp chap hostname router.isphostname <br/>
ppp chap password router.isppassword <br/>
no cdp enable <br/>
! <br/>
interface GigabitEthernet0/1 <br/>
ip address {{ lan_ipv4_address }} {{ ipv4_subnet_mask }} <br/>
no ip proxy-arp <br/>
ip nat inside <br/>
ip virtual-reassembly in <br/>
ip tcp adjust-mss 1300 <br/>
exit <br/>
! <br/>
ip route 0.0.0.0 0.0.0.0 dialer0 <br/>
! <br/>
ip nat inside source list 1 interface dialer0 overload <br/>

{% endif %}

{% if rtr_series == '4000' %}
{% endif %}
{% endif %}

{% if wan_auth_type == 'PPPoE' and (wan_technology_type == 'FTTN' or wan_technology_type == 'FTTC') %}

{% if rtr_series == '880' or rtr_series == '890' %}
interface ethernet0 <br/>
pppoe enable group global <br/>
pppoe-client dial-pool-number 1 <br/>
! <br/>
interface dialer0 <br/>
ip address negotiated <br/>
ip access-group ACL-INFRASTRUCTURE-IN in <br/>
no ip redirects <br/>
no ip proxy-arp <br/>
ip nat outside <br/>
ip inspect FWv4 out <br/>
ip virtual-reassembly in <br/>
encapsulation ppp <br/>
dialer pool 1 <br/>
ppp chap callin <br/>
ppp chap hostname router.isphostname <br/>
ppp chap password router.isppassword <br/>
no cdp enable <br/>
! <br/>
interface vlan 1 <br/>
ip address {{ lan_ipv4_address }} {{ ipv4_subnet_mask }} <br/>
no ip proxy-arp <br/>
ip nat inside <br/>
ip virtual-reassembly in <br/>
ip tcp adjust-mss 1300 <br/>
exit <br/>
! <br/>
ip route 0.0.0.0 0.0.0.0 dialer 0 <br/>
! <br/>
ip nat inside source list 1 interface dialer0 overload <br/>

{% endif %}

{% if rtr_series == '1100' %}
{% endif %}

{% if rtr_series == '1900' or rtr_series == '2900' %}
interface ethernet 0/0/0 <br/>
pppoe enable group global <br/>
pppoe-client dial-pool-number 1 <br/>
! <br/>
interface dialer0 <br/>
ip address negotiated <br/>
ip access-group ACL-INFRASTRUCTURE-IN in <br/>
no ip redirects <br/>
no ip proxy-arp <br/>
ip nat outside <br/>
ip inspect FWv4 out <br/>
ip virtual-reassembly in <br/>
encapsulation ppp <br/>
dialer pool 1 <br/>
ppp chap callin <br/>
ppp chap hostname router.isphostname <br/>
ppp chap password router.isppassword <br/>
no cdp enable <br/>
! <br/>
interface GigabitEthernet0/1 <br/>
ip address {{ lan_ipv4_address }} {{ ipv4_subnet_mask }} <br/>
no ip proxy-arp <br/>
ip nat inside <br/>
ip virtual-reassembly in <br/>
ip tcp adjust-mss 1300 <br/>
exit <br/>
! <br/>
ip route 0.0.0.0 0.0.0.0 dialer 0 <br/>
! <br/>
ip nat inside source list 1 interface dialer0 overload <br/>

{% endif %}

{% if rtr_series == '4000' %}
{% endif %}
{% endif %}

{% endif %}
</div>
  </div>
{% endblock %}